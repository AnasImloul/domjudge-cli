[importlinter]
root_package = dom
include_external_packages = False

# Main contract: Enforce Clean Architecture layering
# This ensures each layer only depends on layers below it
[importlinter:contract:layered-architecture]
name = Enforce layered architecture (CLI -> Operations -> Services -> Infrastructure)
type = layers
layers =
    dom.cli
    dom.core.operations
    dom.core.services
    dom.infrastructure

# Prevent reverse dependencies (lower layers importing upper layers)
[importlinter:contract:no-reverse-dependencies]
name = No reverse dependencies (services/infra cannot import from CLI or operations)
type = forbidden
source_modules =
    dom.core.services
    dom.infrastructure
forbidden_modules =
    dom.cli
    dom.core.operations
